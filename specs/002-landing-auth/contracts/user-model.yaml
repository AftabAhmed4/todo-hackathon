openapi: 3.0.3
info:
  title: User Entity Schema
  description: Data model schema for User entity
  version: 1.0.0

components:
  schemas:
    User:
      type: object
      description: |
        User account entity representing an individual with authentication credentials.
        Each user has a unique ID used for data isolation across the application.
      required:
        - id
        - email
        - password_hash
        - created_at
        - updated_at
      properties:
        id:
          type: integer
          description: Unique identifier for the user (auto-generated)
          example: 1
          readOnly: true
        email:
          type: string
          format: email
          maxLength: 255
          description: |
            User's email address. Must be unique across all users.
            Used for authentication (login).
          example: user@example.com
        password_hash:
          type: string
          maxLength: 255
          description: |
            Bcrypt hash of the user's password.
            NEVER store plaintext passwords.
            NEVER expose this field in API responses.
          example: $2b$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/LewY5NU7qXqXqXqXq
          writeOnly: true
        created_at:
          type: string
          format: date-time
          description: Timestamp when the account was created (UTC, ISO 8601 format)
          example: "2026-01-09T12:00:00Z"
          readOnly: true
        updated_at:
          type: string
          format: date-time
          description: Timestamp when the account was last updated (UTC, ISO 8601 format)
          example: "2026-01-09T12:00:00Z"
          readOnly: true

    UserPublic:
      type: object
      description: |
        Public representation of User entity (safe to expose in API responses).
        Excludes sensitive fields like password_hash.
      required:
        - id
        - email
        - created_at
      properties:
        id:
          type: integer
          description: User's unique identifier
          example: 1
        email:
          type: string
          format: email
          description: User's email address
          example: user@example.com
        created_at:
          type: string
          format: date-time
          description: Account creation timestamp (UTC, ISO 8601 format)
          example: "2026-01-09T12:00:00Z"

    UserCreate:
      type: object
      description: Schema for creating a new user (signup)
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          maxLength: 255
          description: User's email address (must be unique)
          example: user@example.com
        password:
          type: string
          format: password
          minLength: 8
          maxLength: 128
          description: |
            User's password. Must meet security requirements:
            - Minimum 8 characters
            - At least one uppercase letter (A-Z)
            - At least one lowercase letter (a-z)
            - At least one number (0-9)
          example: SecurePass123

    UserLogin:
      type: object
      description: Schema for user authentication (signin)
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          maxLength: 255
          description: User's registered email address
          example: user@example.com
        password:
          type: string
          format: password
          description: User's password
          example: SecurePass123

  examples:
    ValidUser:
      summary: Valid user entity
      value:
        id: 1
        email: user@example.com
        password_hash: $2b$12$LQv3c1yqBWVHxkd0LHAkCOYz6TtxMQJqhN8/LewY5NU7qXqXqXqXq
        created_at: "2026-01-09T12:00:00Z"
        updated_at: "2026-01-09T12:00:00Z"

    ValidUserPublic:
      summary: Valid public user representation
      value:
        id: 1
        email: user@example.com
        created_at: "2026-01-09T12:00:00Z"

    ValidUserCreate:
      summary: Valid user creation request
      value:
        email: newuser@example.com
        password: SecurePass123

    ValidUserLogin:
      summary: Valid user login request
      value:
        email: user@example.com
        password: SecurePass123
